@model UserViewModel
@*This is the Index for the Searches*@
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Your search for @Model.Search.Symbol</h1>

<h2>The score for this stock is @Model.Searches[0].Score</h2>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
            google.charts.load('current', { 'packages': ['corechart'] });
            google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Week', 'Value'],
            ['4 Weeks Ago',  @Model.PastMonthScores[1]],
            ['3 Weeks Ago',  @Model.PastMonthScores[2]],
            ['2 Weeks Ago',  @Model.PastMonthScores[3]],
            ['1 Week Ago',  @Model.PastMonthScores[4]],
            ['Today',  @Model.PastMonthScores[0]]
        ]);


        var options = {
            title: 'Stock Scores for the Past Month',
            legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('PerformanceChart'));

        chart.draw(data, options);
    }
    </script>

</head>

<body>
    @for (int i = Model.Searches.Count() - 1; i >= Model.Searches.Count(); i--)
    {
        <table class="table">
            <tr>
                <td>
                    @Model.Searches[i].Symbol
                </td>
                <td>
                    @Model.Searches[i].Score
                </td>
                <td>
                    @Model.Searches[i].TimeFrame
                </td>
                <td>
                    <a asp-action="Index" asp-route-id="@Model.Searches[i].Id">Search this again</a>
                </td>
            </tr>
        </table>
    }

    <div>
        <a asp-controller="User_Stocks" asp-action="Create">Add more stocks to your portfolio</a>
    </div>

    <div id="PerformanceChart" style="width: 900px; height: 500px"></div>

</body>
