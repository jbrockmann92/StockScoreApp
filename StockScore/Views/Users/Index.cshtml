@model UserViewModel
@*This is the Index for the User*@
@{
    ViewData["Title"] = "Index";
}
<center>
    <h2>Hello, @Model.User.FirstName!</h2>
</center>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Portfolio Value'],
                @for (int i = 0; i < Model.Stocks.Count(); i++)
                {
                    Console.WriteLine("[" + Model.Stocks[i].Scores[i] + "]");
                    //Will only work right now if I do a nested for loop?
                    //['2004',  1000,      400]
                    //Probably not the way to do this. I want to put it into the javascript code
                }
            ]);

            var options = {
                title: 'Portfolio Performance',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('PerformanceChart'));

            chart.draw(data, options);
        }
    </script>

</head>
<body>
    <center>
        <form asp-action="Index">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div>
                <label style="padding-top: inherit; padding-bottom: inherit" asp-for="Search.Symbol">Please enter a stock Symbol you'd like a score for</label>
                <input style="padding-top: inherit; padding-bottom: inherit" asp-for="Search.Symbol" class="form-control" />
            </div>
            <div>
                <label style="padding-top: inherit; padding-bottom: inherit" asp-for="Search.TimeFrame">Please enter the time frame you're looking to invest for. Day, Month, or Year</label>
                <input style="padding-top: inherit; padding-bottom: inherit" asp-for="Search.TimeFrame" class="form-control" />
            </div>
            <div>
                <button style="padding-top: inherit; padding-bottom: inherit" type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>
    </center>

    <table class="table">
        <h3>
            Your Stocks:
        </h3>
        @foreach (var item in Model.Stocks)
        {
            <tr>
                <td>
                    @item.StockSymbol
                </td>
                <td id="PerformanceChart" style="width: 900px; height: 500px">

                </td>

            </tr>
        }
    </table>

    <table class="table">
        <h3>
            Our Top Recommendations:
        </h3>
        <tr>
            <td>
                @Model.top_Stocks.NumberOne
                @*Find a way to make these clickable as searches*@
            </td>
            <td>
                @Model.top_Stocks.NumberTwo
            </td>
            <td>
                @Model.top_Stocks.NumberThree
            </td>
            <td>
                @Model.top_Stocks.NumberFour
            </td>
            <td>
                @*Something to search for this stock*@
                @*Something that will show the stock's open value for today?*@
            </td>
        </tr>
    </table>

</body>